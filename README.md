# PHPコーディング

## アウトライン
- 掲示板への２種の機能追加（いいね、リツイート機能）

- 条件分岐に関する基本的な問題

- 配列操作に関する問題（ソート関数を使わず並び替え）

- データーベースへの接続と探索アルゴリズム（組み合わせの探知）

## 実装箇所詳細

### リツイート機能
- ボタンを押下すると、元の投稿をリツイート可能
- ボタン押下を繰り返すと、リツイートの取り消し可能
- リツイートされた件数を集計して表示
※Twitterのコメントなしのリツイートと同様の挙動

### いいね機能
- いいねボタンを押下すると、ボタンがいいね状態になる（ハートマークの色が変化する）
- ボタン押下を繰り返すと、いいね数が+1、-1される（取り消しが可能）
- リツイートに対して いいね を押下した場合、RT元の投稿のいいね数が+1される
※TwitterのコメントなしのRTに対していいねした時と同じ挙動

## ディレクトリ解説

```
quelcode-php
├── html ....................... ドキュメントルート
├── mysql5.7
│   ├── mysql .................. 起動すると作られる。データ永続化用
│   ├── mysqlvolume ............ mysqlコンテナにマウントされる。ホストとのファイル受け渡し用
│   └── my.cnf ................. mysqlコンテナの設定ファイル
├── php7.2
│   ├── Dockerfile ............. phpコンテナのDockerファイル
│   └── php.ini ................ phpの設定ファイル
├── .gitignore
├── docker-compose.yml
└── README.md
```

## データベース接続情報
MySQL バージョン 5.7.x


### コンテナ内部から接続する場合
```
host:mysql
port:3306
user:test
password:test
dbname:test
```

### Macから接続する場合
```
host:localhost
port:13306
user:test
password:test
dbname:test
```


### FizzBuzz問題

[コードを見る](https://github.com/RYU1030/quelcode-php/blob/master/html/php-pre-challenge1/index.php)

- 1から100までの数をforで繰り返しプリントするプログラムです。
- 但し、3の倍数の時には数の代わりに「3の倍数」と出力します。
- 更に、5の倍数の時には数の代わりに「5の倍数」と出力します。
- 最後に、3と5両方の倍数だった場合には、数の代わりに「3の倍数であり、5の倍数」と出力します。


### 配列操作に関する問題

[コードを見る](https://github.com/RYU1030/quelcode-php/blob/master/html/php-pre-challenge2/index.php)

- GETパラーメータ[array]で受け取った配列を、ソート関数を使わず並べ替えるプログラムです。

- リクエスト(例)※MAMP環境の場合
```
http://localhost:10080/php-pre-challenge2/index.php?array=3,2,1,4,15,18,13,99,77,66,1,100,0
```


- 出力(例)
print_rをした際に、次の形式で出力がなされます。

```
Array
(

    [0] => 0
    [1] => 1
    [2] => 1
    [3] => 2
    [4] => 3
    [5] => 4
    [6] => 13
    [7] => 15
    [8] => 18
    [9] => 66
    [10] => 77
    [11] => 99
    [12] => 100
)
```
### データーベースへの接続と探索アルゴリズムに関する問題 

[コードを見る](https://github.com/RYU1030/quelcode-php/blob/master/html/php-pre-challenge3/index.php)

- GETパラメータ[target]から1以上の整数を受け取り、既にデータベースに保存されている数値の羅列から、足してその数になる組み合わせを探しJSON形式で出力します。
- 同数を作る複数の組み合わせがある場合は、全パターンを出力します。
- 組み合わせが存在しない場合は、返却値の例に倣って出力します（出力時の数値や組み合わせの順番は問わないものとする）。

- もし、GETパラメータ[target]値が1以上の整数ではない場合は、HTTP レスポンスステータスコード[400]で返却します。
例) -1,  0, 01, 1.0, 1.1,  number などを受け取った場合

- もしデータベースに接続できない場合は、HTTP レスポンスステータスコード[500]で返却します。

## 動作

- 動作(例)
リクエスト(例)※MAMP環境の場合
```
http://localhost:10080/php-pre-challenge3/index.php?target=34
```

- データベースの値(例)
prechallenge3テーブル

|value|
|:--|
|17|
|3|
|1|
|13|
|11|
|7|
|19|
|5|

- 出力結果の例(組み合わせが1つしかない場合)
```
[[3,1]]
```
- 出力結果の例(組み合わせが複数ある場合)
```
[[17,3,1],[13,7,1],[11,7,3]]
```
- 出力結果の例(組み合わせが存在しない場合)
```
[]
```

## 開発環境
```
PHP7/Docker/MacOSX
```

## 参考書籍
<a href="https://www.amazon.co.jp/%E3%82%88%E3%81%8F%E3%82%8F%E3%81%8B%E3%82%8BPHP%E3%81%AE%E6%95%99%E7%A7%91%E6%9B%B8-%E3%80%90PHP7%E5%AF%BE%E5%BF%9C%E7%89%88%E3%80%91-%E6%95%99%E7%A7%91%E6%9B%B8%E3%82%B7%E3%83%AA%E3%83%BC%E3%82%BA-%E3%81%9F%E3%81%AB%E3%81%90%E3%81%A1-%E3%81%BE%E3%81%93%E3%81%A8-ebook/dp/B07C3QQKTX/">よくわかるPHPの教科書【PHP7対応版】</a>
